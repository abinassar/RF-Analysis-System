<ion-header>
  <ion-toolbar>
    <ion-buttons slot="primary" class="ion-text-center">
      <ion-button (click)="signOut()">
        Cerrar sesión
      </ion-button>
    </ion-buttons>
    <ion-title>Inicio</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>

  <ion-card-header>
    <ion-card-title>
      <h1>
        Bienvenido!
      </h1>
    </ion-card-title>
  </ion-card-header>

  <ion-card [formGroup]="linksForm"
            *ngIf="showLinkForm"
            [@fadeIn]>

    <img alt="Silhouette of mountains" src="../../../../../../../assets/images/telecom-tower.jpg" />
    <ion-card-header>
      <ion-card-title>

        <ion-row class="ion-align-items-center">

          <ion-col>
            <h1>
              Enlaces:
            </h1>
          </ion-col>

          <ion-col>

            <ion-select placeholder="Enlaces" 
                        formControlName="linkSelected"
                        (ionChange)="onSelectionChange($event)">
              <ion-select-option *ngFor="let link of settingsService.linkSettingsList" 
                                  value="{{link.linkName}}">{{link.linkName}}</ion-select-option>
            </ion-select>


          </ion-col>

        </ion-row>

        <ion-row>
          <h3>
            Características del enlace
          </h3>  
        </ion-row>
        
      </ion-card-title>
    </ion-card-header>

    <ion-card-content>

      <div class="link-features-container">

        <ion-row>

          <ion-col>
            Antena Seleccionada: {{settingsService.linkSettings.antennaSelected.name}}
          </ion-col>

        </ion-row>

        <ion-row>

          <ng-container *ngIf="settingsService.linkSettings.antennaSelected.frecuency !== 0; else noFrecuency">

            <ion-col>
              Frecuencia de operacion: {{settingsService.linkSettings.antennaSelected.frecuency}} ({{translatefrecuencyMultFactor(settingsService.linkSettings.antennaSelected.frecuencyMultiplyFactor)}})
            </ion-col>
            
          </ng-container>
          <ng-template #noFrecuency>

            <ion-col *ngIf="settingsService.linkSettings.antennaSelected.frecuency === 0">
              Frecuencia de operacion: No establecida
            </ion-col>
              
          </ng-template>

          <ng-container *ngIf="settingsService.linkSettings.antennaSelected.txAntennaGain !== 0; else noAntennaGain">

            <ion-col>
              Ganancia de la antena: {{settingsService.linkSettings.antennaSelected.txAntennaGain}} (dBi)
            </ion-col>  

          </ng-container>
          <ng-template #noAntennaGain>

            <ion-col>
              Ganancia de la antena: No establecida
            </ion-col>
              
          </ng-template>
          
        </ion-row>

        <ion-row>

          <ng-container *ngIf="settingsService.linkSettings.antennaSelected.freeSpaceLoss !== 0; else noPELCalculate">
            <ion-col>
              Pérdida de espacio libre: {{settingsService.linkSettings.antennaSelected.freeSpaceLoss}} (dBm)
            </ion-col>  
          </ng-container>
          <ng-template #noPELCalculate>
            <ion-col>
              Pérdida de espacio libre: No calculada (calcular en "Potencia")
            </ion-col>  
          </ng-template>
                    
        </ion-row>

        <ion-row>

          <ng-container *ngIf="settingsService.linkSettings.antennaSelected.rxSensitivity !== 0; else noRxSensitivity">
            <ion-col>
              Sensibilidad el receptor: {{settingsService.linkSettings.antennaSelected.rxSensitivity}} (dBm)
            </ion-col>  
          </ng-container>
          <ng-template #noRxSensitivity>
            <ion-col>
              Sensibilidad el receptor: No establecida
            </ion-col>  
          </ng-template>
                    
        </ion-row>

      </div>

      <ion-row>
        <ion-col size="12">
          <ion-button (click)="newLink()"
                      expand="full">

            <!-- <ion-icon slot="start" name="bar-chart"></ion-icon> -->
            <ion-icon slot="start" name="add-circle-outline"></ion-icon>
            Nuevo Enlace
          </ion-button>
        </ion-col>
      </ion-row>


    </ion-card-content>
    
  </ion-card>

  <ion-card *ngIf="showLinkForm"
            [@fadeIn]>

    <ion-card-header>
      <ion-card-title>
        Gráficas de estudio:
      </ion-card-title>
    </ion-card-header>

    <ion-card-content>

      <ion-row>
        <ion-col size="12">
          <ion-button (click)="navToProfileGraph()"
                      expand="full">

            <ion-icon slot="start" name="bar-chart"></ion-icon>

            Perfil de elevación
          </ion-button>
        </ion-col>
      </ion-row>

      <ion-row>
        <ion-col size="12">
          <ion-button (click)="navToAtenuationGraph()"
                      expand="full">
            <ion-icon slot="start" name="sunny"></ion-icon>
            Atenuacion en Aire Seco

          </ion-button>
        </ion-col>
      </ion-row>

      <ion-row>
        <ion-col size="12">
          <ion-button (click)="navToAtenuationVaporGraph()"
                      expand="full">
            <ion-icon slot="start" name="water"></ion-icon>
            Atenuacion debido a Vapor de Agua
          </ion-button>
        </ion-col>
      </ion-row>

      <ion-row>
        <ion-col size="12">
          <ion-button (click)="navToPowerBudget()"
                      expand="full">
            <ion-icon slot="start" name="power"></ion-icon>
            Balance de Potencia
          </ion-button>
        </ion-col>
      </ion-row>

    </ion-card-content>

  </ion-card>

</ion-content>
